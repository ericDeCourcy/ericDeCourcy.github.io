<!--run this with 'npx http-server -o index.html'-->
<head>
	<meta charset="utf-8">
	<link rel="icon" type="image/png" href="./favicon.png">
	<title>Fuse Stable Swap</title>
	<link href="./default.css" rel="stylesheet">
</head>

<body>
	<noscript>You need to enable JavaScript to run this app.</noscript>
	
	<div id="metamaskConnection" class="tab">
		<h1>Connect With Metamask</h1>
		<div class="instructions">
			First things first, connect to MetaMask! If you don't have metamask, download it from metamask.io
			<br/>If you're connected, you'll see a message below the button indicating this.
		</div>
		<br/>
		<button id="enableEthereumButton" class="majorButton" onclick="connectToMetamask(this)">Connect To MetaMask</button>
		<div id="transactionStatus" class="status">Metamask not connected</div>
	</div>

	<div id="tokenApproval" class="tab" hidden>
		<h1>Approvals</h1>
		<div class="instructions">
			Before using StableSwap, you'll need to approve any tokens you plan to transfer in.
			<br/>These buttons will approve the maximum amount of each token.
			<br/>Note that you will need to approve the LP token if you plan to withdraw, as this gives the swap contract the ability to burn your LP tokens.
		</div>
		<div id="tokenApprovalButtons">
			<button id="approveDaiButton" onclick="approveDai(this)">Approve Fake-DAI</button>
			<span id="approveDaiStatus" class="status"></span>
			<br/>
			<button id="approveUsdcButton" onclick="approveUsdc(this)">Approve Fake-USDC</button>
			<span id="approveUsdcStatus" class="status"></span>
			<br/>
			<button id="approveUsdtButton" onclick="approveUsdt(this)">Approve Fake-USDT</button>
			<span id="approveUsdtStatus" class="status"></span>
			<br/>
			<button id="approveLPButton" onclick="approveLP(this)">Approve LP Tokens</button>
			<span id="approveLPStatus" class="status"></span>
		</div>
		<button id="continueButton" class="majorButton" onclick="continueToActionsTab()">Skip / Continue</button>
	</div>

	<div id="actions" class="tab" hidden>
		<div id="actionInstructions" class="section">
			<h1>Take Action!</h1>
			<div class="instructions">
				Now that you're connected and you've approved tokens, you're ready to take actions.
				<br/>You can deposit liquidity, swap, or perform 3 different types of liquidity withdrawal.
			</div>
		</div>

		<div id="actionOptions">
			<button id="depositTitle" class="sectionButton" onclick="selectSection(0)">Deposit</button>
			<button id="swapTitle" class="sectionButton activeSection" onclick="selectSection(1)">Swap</button>
			<button id="withdrawTitle" class="sectionButton" onclick="selectSection(2)">Withdraw</button>
			<button id="rewardsTitle" class="sectionButton" onclick="selectSection(3)">Rewards</button>
		</div>
		<div id="deposit" class="section" hidden>
			<div class="instructions">
				Input amounts and then click Deposit. Make sure your tokens are approved!
			</div>
			<form>
				<label for="DaiToDeposit">Fake-DAI To Deposit:</label>
				<input type="number" id="DaiToDeposit" name="DaiToDeposit" min="0" value="0">
				<label for="UsdcToDeposit">Fake-USDC To Deposit:</label>
				<input type="number" id="UsdcToDeposit" name="UsdcToDeposit" min="0" value="0">
				<label for="UsdtToDeposit">Fake-USDT To Deposit:</label>
				<input type="number" id="UsdtToDeposit" name="UsdtToDeposit" min="0" value="0">
			</form>
			<button id="depositButton" class="majorButton" onclick="deposit(this)">Deposit</button>	
			<div id="depositStatus" class="status">Deposit not initiated.</div>
		</div>
		
		<div id="swap" class="section">
			<div class="instructions">
				Pick what token to input and what token you'd like to recieve. Then, pick how many of the input token you'd like to send in.
			</div>
			<form>
				<label for="swapAmountIn">Tokens in for swap:</label>
				<input type="number" id="swapAmountIn" name="swapAmountIn" min="0" value="0">
				<label for="swapTokenIndexIn">Token for swap Input:</label>
				<select id="swapTokenIndexIn" name="swapTokenIndexIn">
					<option value=0>Fake-DAI</option>
					<option value=1>Fake-USDC</option>
					<option value=2>Fake-USDT</option>
				</select>
				<label for="swapTokenIndexOut">Token for swap Output:</label>
				<select id="swapTokenIndexOut" name="swapTokenIndexOut">
					<option value=0 selected>Fake-DAI</option>
					<option value=1>Fake-USDC</option>
					<option value=2>Fake-USDT</option>
				</select>
			</form>
			<button id="swapButton" class="majorButton" onclick="swap(this)">Swap</button>
			<div id="swapStatus" class="status">Swap not initiated.</div>
		</div>

		<div id="withdraw" class="section" hidden>
			<div id="swapOptions">
				<button id="balancedWithdrawalTitle" class="subsectionButton activeSection" onclick="selectSubsection(0)">Balanced Withdrawal</button>
				<button id="imbalancedWithdrawalTitle" class="subsectionButton" onclick="selectSubsection(1)">Imbalanced Withdrawal</button>
				<button id="singleWithdrawalTitle" class="subsectionButton" onclick="selectSubsection(2)">Single Token Withdrawal</button>
			</div>
			<div id="balancedWithdrawal" class="subsection">
				<div class="instructions">
					This will burn LP tokens and send you tokens in equal proportions to what the pool has.
					<br/>Make sure your LP tokens are approved!
				</div>
				<span id="LPTokenBalance">Retreiving LP Token balance...</span>
				<form>
					<label for="withdrawAmountInput">LP Tokens To Withdraw:</label>
					<input type="number" id="withdrawAmountInput" name="withdrawAmountInput" min="0" value="0">
				</form>
				<button id="withdrawBalancedButton" class="majorButton" onclick="withdrawBalanced(this)">Withdraw Balanced</button>
				<div id="withdrawBalancedStatus" class="status">Balanced Withdrawal not initiated.</div>
			</div>

			<div id="imbalancedWithdrawal" class="subsection" hidden>
				<div class="instructions">
					This will give the "desired" amounts of each tokens, burning the appropriate number of LP tokens. Keep in mind that this may burn up to all of your LP tokens.
					<br/>Make sure your LP tokens are approved!
				</div>
				<form>
					<label for="imbalancedDAIOut">DAI desired:</label>
					<input type="number" id="imbalancedDAIOut" name="imbalancedDAIOut" min="0" value="0">
					<label for="imbalancedUSDCOut">USDC desired:</label>
					<input type="number" id="imbalancedUSDCOut" name="imbalancedUSDCOut" min="0" value="0">
					<label for="imbalancedUSDTOut">USDT desired:</label>
					<input type="number" id="imbalancedUSDTOut" name="imbalancedUSDTOut" min="0" value="0">
				</form>
				<button id="withdrawImbalancedButton" class="majorButton" onclick="withdrawImbalanced(this)">Withdraw Imbalanced</button>
				<div id="withdrawImbalancedStatus" class="status">Imbalanced Withdrawal not initiated.</div>
			</div>
			
			<div id="singleWithdrawal" class="subsection" hidden>
				<div class="instructions">
					This will burn a specified amount of LP tokens and withdraw all funds in the form of a single token.
				</div>
				<form>
					<label for="singleTokenIndex">Withdrawal Token:</label>
					<select id="singleTokenIndex" name="singleTokenIndex">
						<option value=0 selected>Fake-DAI</option>
						<option value=1>Fake-USDC</option>
						<option value=2>Fake-USDT</option>
					</select>
					<label for="singleTokenAmount">Amount Of LP Token To Withdraw:</label>
					<input type="number" id="singleTokenAmount" name="singleTokenAmount" min="0" value="0">
				</form>
				<button id="withdrawSingleButton" class="majorButton" onclick="withdrawSingleToken(this)">Withdraw Single Token</button>
				<div id="singleWithdrawStatus" class="status">Single Token Withdrawal not initiated.</div>
			</div>
		</div>

		<div id="rewards" class="section" hidden>
			<div class="instructions">
				Over time, your LP token balance will entitle you to rewards. All you need to do to get rewards is own LP tokens, then click this button to claim them!
			</div>
			<button id="getRewardsButton" class="majorButton" onclick="claimRewards(this)">Claim Rewards</button>
			<div id="getRewardsStatus" class="status">Claim Rewards not initiated.</div>
		</div>
	</div>
	
<script src="main.js"></script>
</body>	

