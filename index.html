<!--run this with 'npx http-server -o index.html'-->
<head>
	<meta charset="utf-8"/>
	<link rel="icon" type="image/png" href="./favicon.png"/>
	<title>Fuse Stable Swap</title>
	<link href="./default.css" rel="stylesheet"/>
</head>

<body>
	<noscript>You need to enable JavaScript to run this app.</noscript>
	<div id="loadingOverlay" hidden=true></div>
	
	<div id="metamaskConnection" class="tab">
		<h1>Connect With Metamask</h1>
		<div class="instructions">
			First things first, connect to MetaMask! If you don't have metamask, download it from <a href="https://metamask.io" target="_blank" rel="noopener noreferrer">metamask.io</a>.
		</div>
		<br/>
		<button id="enableEthereumButton" class="majorButton" onclick="connectToMetamask(this)">Connect To MetaMask</button>
		<div id="transactionStatus" class="status">Metamask not connected.</div>
	</div>

	<div id="actions" class="tab" hidden>
		<div class="back"><button class="back" onclick="showConnectionTab()">‚Üê</button></div>
		<div id="poolOptions"><!-- pool options dynamically generated--></div>
		<div id="actionOptions">
			<button id="depositTitle" class="sectionButton" onclick="selectSection(0)">Deposit</button>
			<button id="swapTitle" class="sectionButton activeSection" onclick="selectSection(1)">Swap</button>
			<button id="withdrawTitle" class="sectionButton" onclick="selectSection(2)">Withdraw</button>
			<button id="rewardsTitle" class="sectionButton" onclick="selectSection(3)">Rewards</button>
		</div>

		<div id="deposit" class="section" hidden>
			<div class="instructions">
				Deposit tokens into the pool and recieve pool LP tokens
			</div>
			<form id="depositForm"><!-- pool token inputs dynamically generated --></form>
			<div id="depositButtonWrapper"><button id="depositButton" class="majorButton">Deposit</button></div>
			<div id="depositStatus" class="status">Deposit not initiated.</div>
		</div>
		
		<div id="swap" class="section">
			<div class="instructions">
			</div>
			<form id="swapForm"><!-- token options dynamically generated --></form>
			<div id="swapButtonWrapper"><button id="swapButton" class="majorButton">Swap</button></div>
			<div id="userBalance" class="status"> <!-- balance --> </div>
			<div id="swapEstimate" class="status">No swap estimate.</div>
			<div id="swapStatus" class="status">Swap not initiated.</div>
		</div>

		<div id="withdraw" class="section" hidden>
			<div id="withdrawalOptions">
				<button id="balancedWithdrawalTitle" class="subsectionButton activeSection" onclick="selectSubsection(0)">Balanced Withdrawal</button>
				<button id="imbalancedWithdrawalTitle" class="subsectionButton" onclick="selectSubsection(1)">Imbalanced Withdrawal</button>
				<button id="singleWithdrawalTitle" class="subsectionButton" onclick="selectSubsection(2)">Single Token Withdrawal</button>
			</div>
 
			<div id="balancedWithdrawal" class="subsection">
				<div class="instructions">
					You will recieve tokens in equal proportions to what the pool has.
				</div>
				<span id="LPTokenBalance">Retreiving LP Token balance...</span>
				<form>
					<label for="withdrawAmountInput">LP Tokens To Withdraw:</label>
					<input type="number" id="withdrawAmountInput" name="withdrawAmountInput" min="0" value="0"/>
				</form>
				<div id="withdrawBalancedButtonWrapper"><button id="withdrawBalancedButton" class="majorButton">Withdraw Balanced</button></div>
				<div id="withdrawBalancedStatus" class="status">Balanced Withdrawal not initiated.</div>
			</div>

			<div id="imbalancedWithdrawal" class="subsection" hidden>
				<div class="instructions">
					You can specify however many tokens you'd like to receive.
				</div>
				<form id="imbalancedWithdrawalForm"><!-- token options dynamically generated --></form>
				<div id="withdrawImbalancedButtonWrapper"><button id="withdrawImbalancedButton" class="majorButton">Withdraw Imbalanced</button></div>
				<div id="withdrawImbalancedStatus" class="status">Imbalanced Withdrawal not initiated.</div>
			</div>
			
			<div id="singleWithdrawal" class="subsection" hidden>
				<div class="instructions">
					This will burn a specified amount of LP tokens and withdraw all funds in the form of a single token.
				</div>
				<form id="singleWithdrawalForm"><!-- token options dynamically generated --></form>
				<div id="withdrawSingleButtonWrapper"><button id="withdrawSingleButton" class="majorButton">Withdraw Single Token</button></div>
				<div id="singleWithdrawStatus" class="status">Single Token Withdrawal not initiated.</div>
			</div>
		</div>

		<div id="rewards" class="section" hidden>
			<div class="instructions">
				Over time, your LP token balance will entitle you to rewards. All you need to do to get rewards is own LP tokens, then click this button to claim them!
			</div>
			<button id="getRewardsButton" class="majorButton" onclick="claimRewards(this)">Claim Rewards</button>
			<div id="getRewardsStatus" class="status">Claim Rewards not initiated.</div>
		</div>
	</div>
	<div id="helpLink"><a href="https://github.com/ericDeCourcy/FUSE-stableswap#using-fuse-stable-swap" target="_blank" rel="noopener noreferrer">How to Use this App</a></div>
<script src="./pools.js"></script>
<script src="./main.js"></script>
</body>	

